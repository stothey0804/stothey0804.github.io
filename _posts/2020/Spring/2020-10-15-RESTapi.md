---
title: \[Spring] REST API
tags:
- REST
categories:
- Spring
toc: true
toc_sticky: true
---

## REST

REST(Representational State Transfer)란 자원(URI)과 행위(Http Method)를 기반으로 데이터를 주고 받는 방법을 말한다.
REST 원리를 따르는 시스템은 RESTful이란 용어로 지칭된다.

#### CRUD Operation

|행위(Http Method)|설명|
|:---:|:---|
|POST|Create|
|GET|Read|
|PUT|Update|
|DELETE|Delete|
|HEAD|Header 정보조회|

* 장점
- HTTP 프로토콜 인프라를 그대로 사용 가능
- HTTP 프로토콜이 사용가능한 모든 플랫폼에서 사용이 가능 - *다양한 브라우저와 모바일 디바이스에서 통신*

* 단점
- 명확한 표준이 존재하지 않는다.
- 사용할 수 있는 메서드가 4가지 밖에 없다.
- 구현 브라우저는 PUT, DELETE를 사용할 수 없다.



## Spring REST API

#### @RestController

JSP와 같은 view를 반환하는 것이 아니고 JSON, XML같은 데이터를 브라우저로 전송하는 컨트롤러

```java
@RestController
@RequestMapping("/test/*")
public Class TestController{
    // 문자열 전달
    @RequestMapping("/hello")
    public String hello(){
        return "hello REST!";
    }
    // VO객체를 JSON으로 전달
    @RequestMappring("/member")
    public MemberVO member(){
        MemberVO vo = new MemberVO();
        vo.setID("SYKIM");
        vo.setPwd("1234");
        return vo;
    }
    ...
}
```

VO 객체는 물론 **Collection(Map, List 등) 객체도 JSON으로 전달**된다.



#### @PathVariable

브라우저에서 요청 URI로 전달된 매개변수를 가져올 수 있다.

```java
@RequestMapping(value = "/notice/{num}", method = RequestMethod.GET)
public int notice(@PathVariable("num") int num) throws Exception{
    return num;
}
```

브라우저에서 요청 시, `{num}`부분의 값이 @PathVariable로 지정된다.


#### @RequestBody

REST는 Ajax와 연동해서 자주 사용되는데, 
브라우저에서 JSON 데이터를 컨트롤러로 전송 시, @RequestBody를 사용하면 컨트롤러에서 전송받은 JSON을 객체로 변환하는 기능을 구현한다.

```java
@RequestMapping(value= "/info", method= RequestMethod.POST )
public void modify(@RequestBody MemberVO vo){
    // JSON으로 전송된 데이터를 MemberVO 객체의 속성에 자동 설정
    logger.info(vo.toString());
}
```

```javascript
$(function(){
    $('#checkJson').click(function(){
        var member = { id: 'hong', name: '홍길동', pwd: '1234'};
        $.ajax({
            type: 'post',
            url: '${contextPath}/test/info',
            contentType: 'application/json',
            data: JSON.stringfy(member),    // 회원정보 객체를 JSON 문자열로 변환
            ...
        });
    });
});
```


#### @ResponseBody

RestController로 지정하지 않았어도 ResponseBody가 적용된 메서드는
JSP가 아닌 JSON으로 결과를 전송한다.

```java
@Controller
public class Controller{
    @RequestMapping("/res1");
    @ResponseBody
    public Map<String, Object> res1(){
        Map<String, Object> map = new HashMap<String, Object>();
        map.put("id","hong");
        map.put("name","홍길동");
        // Map 데이터를 브라우저로 전송
        return map;
    }
}

```

#### @ResponseEntity

예외에 대한 세밀한 제어가 필요한 경우 ResponseEntity 클래스를 사용하여 HTTP 상태코드를 설정하여 전송하도록 한다.



#### REST방식으로 URI 표현하기

