---
title: \[Spring] REST API
tags:
- REST
categories:
- Spring
toc: true
toc_sticky: true
---

## REST

REST(Representational State Transfer)ë€ ìì›(URI)ê³¼ í–‰ìœ„(Http Method)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ” ë°©ë²•ì„ ë§í•œë‹¤.
REST ì›ë¦¬ë¥¼ ë”°ë¥´ëŠ” ì‹œìŠ¤í…œì€ RESTfulì´ë€ ìš©ì–´ë¡œ ì§€ì¹­ëœë‹¤.

### CRUD Operation

|í–‰ìœ„(Http Method)|ì„¤ëª…|
|:---:|:---|
|POST|Create|
|GET|Read|
|PUT|Update|
|DELETE|Delete|
|HEAD|Header ì •ë³´ì¡°íšŒ|


**ì¥ì **
- HTTP í”„ë¡œí† ì½œ ì¸í”„ë¼ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥
- HTTP í”„ë¡œí† ì½œì´ ì‚¬ìš©ê°€ëŠ¥í•œ ëª¨ë“  í”Œë«í¼ì—ì„œ ì‚¬ìš©ì´ ê°€ëŠ¥ - *ë‹¤ì–‘í•œ ë¸Œë¼ìš°ì €ì™€ ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ì—ì„œ í†µì‹ *


**ë‹¨ì **
- ëª…í™•í•œ í‘œì¤€ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œê°€ 4ê°€ì§€ ë°–ì— ì—†ë‹¤.
- êµ¬í˜„ ë¸Œë¼ìš°ì €ëŠ” PUT, DELETEë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.



## Spring REST API

### @RestController

JSPì™€ ê°™ì€ viewë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆê³  JSON, XMLê°™ì€ ë°ì´í„°ë¥¼ ë¸Œë¼ìš°ì €ë¡œ ì „ì†¡í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬

```java
@RestController
@RequestMapping("/test/*")
public Class TestController{
    // ë¬¸ìì—´ ì „ë‹¬
    @RequestMapping("/hello")
    public String hello(){
        return "hello REST!";
    }
    // VOê°ì²´ë¥¼ JSONìœ¼ë¡œ ì „ë‹¬
    @RequestMappring("/member")
    public MemberVO member(){
        MemberVO vo = new MemberVO();
        vo.setID("SYKIM");
        vo.setPwd("1234");
        return vo;
    }
    ...
}
```

VO ê°ì²´ëŠ” ë¬¼ë¡  **Collection(Map, List ë“±) ê°ì²´ë„ JSONìœ¼ë¡œ ì „ë‹¬**ëœë‹¤.



### @PathVariable

ë¸Œë¼ìš°ì €ì—ì„œ ìš”ì²­ URIë¡œ ì „ë‹¬ëœ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

```java
@RequestMapping(value = "/notice/{num}", method = RequestMethod.GET)
public int notice(@PathVariable("num") int num) throws Exception{
    return num;
}
```

ë¸Œë¼ìš°ì €ì—ì„œ ìš”ì²­ ì‹œ, `{num}`ë¶€ë¶„ì˜ ê°’ì´ @PathVariableë¡œ ì§€ì •ëœë‹¤.


### @RequestBody

RESTëŠ” Ajaxì™€ ì—°ë™í•´ì„œ ìì£¼ ì‚¬ìš©ë˜ëŠ”ë°, 
ë¸Œë¼ìš°ì €ì—ì„œ JSON ë°ì´í„°ë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì „ì†¡ ì‹œ, @RequestBodyë¥¼ ì‚¬ìš©í•˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì „ì†¡ë°›ì€ JSONì„ ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤.

```java
@RequestMapping(value= "/info", method= RequestMethod.POST )
public void modify(@RequestBody MemberVO vo){
    // JSONìœ¼ë¡œ ì „ì†¡ëœ ë°ì´í„°ë¥¼ MemberVO ê°ì²´ì˜ ì†ì„±ì— ìë™ ì„¤ì •
    logger.info(vo.toString());
}
```

```javascript
$(function(){
    $('#checkJson').click(function(){
        var member = { id: 'hong', name: 'í™ê¸¸ë™', pwd: '1234'};
        $.ajax({
            type: 'post',
            url: '${contextPath}/test/info',
            contentType: 'application/json',
            data: JSON.stringfy(member),    // íšŒì›ì •ë³´ ê°ì²´ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜
            ...
        });
    });
});
```


### @ResponseBody

RestControllerë¡œ ì§€ì •í•˜ì§€ ì•Šì•˜ì–´ë„ ResponseBodyê°€ ì ìš©ëœ ë©”ì„œë“œëŠ”
JSPê°€ ì•„ë‹Œ JSONìœ¼ë¡œ ê²°ê³¼ë¥¼ ì „ì†¡í•œë‹¤.

```java
@Controller
public class Controller{
    @RequestMapping("/res1");
    @ResponseBody
    public Map<String, Object> res1(){
        Map<String, Object> map = new HashMap<String, Object>();
        map.put("id","hong");
        map.put("name","í™ê¸¸ë™");
        // Map ë°ì´í„°ë¥¼ ë¸Œë¼ìš°ì €ë¡œ ì „ì†¡
        return map;
    }
}

```

### @ResponseEntity

ì˜ˆì™¸ì— ëŒ€í•œ ì„¸ë°€í•œ ì œì–´ê°€ í•„ìš”í•œ ê²½ìš° ResponseEntity í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ HTTP ìƒíƒœì½”ë“œë¥¼ ì„¤ì •í•˜ì—¬ ì „ì†¡í•˜ë„ë¡ í•œë‹¤.

```java
...
    public ResponseEntity<List<MemberVO>> listMembers(){
        List<MemberVO> list = new ArrayList<MemberVO>();
        ...
        return new ResponseEntity(list, HttpStatus.INTERNAL_SERVER_ERROR);  // ì˜¤ë¥˜ì½”ë“œ 500 ì‘ë‹µ
    }
```

* ResponseEntityì—ì„œ ì„¤ì •í•  ìˆ˜ ìˆëŠ” HTTP ìƒíƒœì½”ë“œ (ì¼ë¶€)

|ì½”ë“œ|ìƒìˆ˜|
|---|---|
|200|OK|
|201|CREATED|
|400|BAD_REQUEST|
|403|FORBIDDEN|
|404|NOT_FOUND|
|500|INTERAL_SERVER_ERROR|


#### HttpHeaders í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ ResponseEntity ì „ì†¡

```java
...
    public ResponseEntity res3(){
        HttpHeaders responseHeaders = new HttpHeaders();
        // ì „ì†¡í•  ë°ì´í„°ì˜ ì¢…ë¥˜ì™€ ì¸ì½”ë”© ì„¤ì •
        responseHeaders.add("Content-Type","text/html;charset=utf-8");
        String message = "<script>";
        message += "alert('ìƒˆ íšŒì›ì„ ë“±ë¡í•©ë‹ˆë‹¤.')";
        message += "location.href='/...'; ";
        message += "</script>";
        // ResponseEntityë¥¼ ì´ìš©í•´ HTML í˜•ì‹ìœ¼ë¡œ ì „ì†¡
        return new ResponseEntity(message, responseHeaders, HttpStatus.CREATED);
    }
```

ìœ„ ë©”ì„œë“œê°€ ë§¤í•‘ëœ ì£¼ì†Œë¡œ ì ‘ì†í•˜ë©´, `message`ì— ì…ë ¥í•œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê²½ê³ ë©”ì‹œì§€ê°€ í‘œì‹œëœë‹¤.

ResponseEntityë¥¼ ì‚¬ìš©í•˜ë©´, JSON ë¿ë§Œ ì•„ë‹ˆë¼ HTML ë˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¸Œë¼ìš°ì €ë¡œ ì „ì†¡í•  ìˆ˜ ìˆì–´ ê²°ê³¼ë©”ì‹œì§€ ë˜ëŠ” ì˜¤ë¥˜ë©”ì‹œì§€ë¥¼ ì „ì†¡í•  ë•Œ í¸ë¦¬í•˜ë‹¤.


### RESTë°©ì‹ìœ¼ë¡œ URI í‘œí˜„í•˜ê¸°

RESTë°©ì‹ì—ì„œëŠ” ì¡°íšŒ ë¿ë§Œ ì•„ë‹ˆë¼ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œ (CRUD) ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ë•Œ 
í¬ìŠ¤íŒ… ìƒìœ„ì— ì‘ì„±í•œ ê²ƒì²˜ëŸ¼ HTTP ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ì²˜ë¦¬í•´ì•¼í•œë‹¤.


#### REST ìš”ì²­ URIì˜ ì˜ˆ

`/ì‘ì—…ëª…/ê¸°ë³¸í‚¤ + ë©”ì„œë“œ + ë°ì´í„°`

- ì‘ì—…ëª… : ìš”ì²­ ì‘ì—…ì˜ ì¢…ë¥˜ `/boards`
- ê¸°ë³¸í‚¤ : ì‘ì—… ëŒ€ìƒì˜ ê¸°ë³¸ í‚¤ `/133`
- ë©”ì„œë“œ : ìˆ˜í–‰ ê¸°ëŠ¥
- ë°ì´í„° : ê¸°ëŠ¥ ìˆ˜í–‰ ì‹œ í•„ìš”í•œ JSON ë°ì´í„°

|ë©”ì„œë“œ|URI|ì„¤ëª…|
|---|---|---|
|POST|/boards+ë°ì´í„°|ìƒˆ ê¸€ ë“±ë¡|
|GET|/boards/133|133ë²ˆ ê¸€ ì¡°íšŒ|
|PUT|/boards/133+ë°ì´í„°|133ë²ˆ ê¸€ ìˆ˜ì •|
|DELETE|/boards/133|133ë²ˆ ê¸€ ì‚­ì œ|


#### ì˜ˆì œ ì½”ë“œ

```java
@RestController
@RequestMapping("/boards")
public class BoardController{
    ...
    // articleNOì— í•´ë‹¹í•˜ëŠ” ê¸€ ì¡°íšŒ - GET
    @RequestMapping(value = "/{articleNO}", method = RequestMethod.GET)
    public ResponseEntity<ArticleVO> findArticle(@PathVarialbe("articleNO") Integer articleNO){
        ...
        return new ResponseEntity<ArticleVO>(vo, HttpStatus.OK);
    }
    
    // JSONìœ¼ë¡œ ì „ë‹¬ëœ ê°ì²´ë¥¼ ìƒˆ ê¸€ë¡œ ì¶”ê°€ - POST
    @RequestMapping(value = "", method = RequestMethod.POST)
    public ResponseEntity<String> addArticle(@RequestBody ArticleVO articleVO){
        ResponseEntity<String> resEntity = null;
        try{
            resEntity = new ResponseEntity("ADD_SUCCEDED",HttpStatus.OK);
        }catch(Exception e){
            resEntity = new ResponseEntity(e.getMessage(),HttpStatus.BAD_REQUEST);
        }
        return resEntity;
    }

    // articleNoì— í•´ë‹¹í•˜ëŠ” ê¸€ì„ JSONìœ¼ë¡œ ì „ë‹¬ëœ ê°ì²´ë¡œ ìˆ˜ì • - PUT
     @RequestMapping(value = "/{articleNO}", method = RequestMethod.PUT)
     public ResponseEntity<String> modArticle(@PathVarialbe("articleNO") Integer articleNO, @RequestBody ArticleVO articleVO){
         ...
     }

    // articleNoì— í•´ë‹¹í•˜ëŠ” ê¸€ì„ ì‚­ì œ - DELETE
     @RequestMapping(value = "/{articleNO}", method = RequestMethod.DELETE)
     public ResponseEntity<String> removeArticle(@PathVarialbe("articleNO") Integer articleNO){
         ...
     }
}
```

```javascript
<script>
...
    $.ajax({
        // ë“±ë¡ ì‹œ - POSTë°©ì‹, /board+ë°ì´í„°
        type: 'POST',
        url: '${contextPath}/boards'
        contentType: 'application/json',
        data: JSON.stringfy(article),
        ...
    });
</script>
```

ìˆ˜ì •ê³¼ ì‚­ì œ ë“±ì€ typeì™€ urlë¥¼ ë°”ê¾¸ë©´ ëœë‹¤ ğŸ˜€